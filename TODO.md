# Git Worktree Scripts TODO

## Completed
- [x] Create gwtlist command to display worktrees in formatted manner
- [x] Add git-worktree-config.yaml creation to gwtinit command
  - Stores repository URL, main branch, and creation timestamp
  - Helps with future Bitbucket PR integration
- [x] Implement gwtadd command to create new worktrees
  - Works from project root or worktree directory
  - Supports folder names with slashes (e.g., feature/IP-487-replace-icon-buttons)
  - Automatically branches from main/default branch
  - Detects existing branches and checks them out instead of creating new ones
  - Automatically navigates to new worktree after creation
- [x] Implement gwtswitch command
  - Quick switching between existing worktrees
  - Navigate to selected worktree directory
  - Shows available worktrees when no branch specified
  - Helpful error messages when branch not found
- [x] Add tab completion for gwtswitch command
  - Shows available local worktrees for completion
  - Displays helpful message when no worktrees found
  - Filters completions based on current input
- [x] Implement gwtremove command
  - Remove current worktree when no parameter given
  - Remove specified worktree when parameter provided
  - Safety checks to prevent removing main/bare repository
  - Automatic navigation to project root when removing current worktree
  - Clear confirmation messages and error handling
  - Also removes associated git branches (except main branches)
- [x] Add tab completion for gwtremove command
  - Shows available worktree branches for removal
  - Filters completions based on current input
  - Displays helpful messages when no completions available
- [x] Comprehensive test suite
  - 15 integration tests covering all major functionality
  - Tests both bash function wrappers and direct TypeScript calls
  - Tests error handling and edge cases
  - Tests tab completion functionality
- [x] Complete documentation
  - Updated CLAUDE.md with full feature documentation
  - Comprehensive README.md explaining git worktrees concept
  - Installation instructions and workflow examples
  - Commands reference and benefits overview
- [x] Implement comprehensive hooks system
  - Four hook types: postInit, postAdd, postSwitch, postRemove
  - Variable substitution support for ${branchName} and ${worktreePath}
  - Real-time output streaming using execSync with stdio: 'inherit'
  - Comment-based configuration (all hooks disabled by default)
  - Smart comment detection (lines starting with # are skipped)
  - Proper error handling with warnings that don't stop execution
  - Context-aware execution (hooks run in appropriate directories)
  - Configuration auto-generation with helpful examples in git-worktree-config.yaml

## Pending
- [ ] Add Bitbucket PR search functionality for branches
  - Search for open PRs associated with each worktree branch
  - Display PR status inline with worktree list
  - Add ability to open PR in browser
  - Use repository URL from git-worktree-config.yaml
- [ ] Add tab completion for gwtadd command
  - Show available remote branches for checkout
  - Auto-complete branch names

## Future Enhancements
- [ ] Add filtering options to gwtlist (by branch pattern, age, etc.)
- [ ] Add colorized output for better readability
- [ ] Show last commit date/author for each worktree
- [x] Add ability to switch between worktrees quickly (completed via gwtswitch)
- [ ] Add cleanup command for stale worktrees
- [ ] Use git-worktree-config.yaml for additional features:
  - Store worktree metadata (creation date, last accessed, etc.)
  - Track branch relationships
  - Store Bitbucket project/repo keys